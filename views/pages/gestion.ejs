<div class="page-title">
  <h2>Panel de administrador: Gestión de Restaurantes</h2>
</div>

<div class="admin-container">
  <div class="add-form admin-side">
    <h3>Agregar Nuevo Restaurante</h3>
    <form action="/admin/restaurantes/agregar" method="POST">
      <div class="form-item">
        <label class="form-label">Nombre</label>
        <input type="text" name="nombre" class="form-control" required />
      </div>
      <div class="form-item">
        <label class="form-label">Tipo de Comida</label>
        <input type="text" name="tipoComida" class="form-control" />
      </div>
      <div class="form-item">
        <label class="form-label">Descripción</label>
        <textarea name="descripcion" class="form-control" rows="2"></textarea>
      </div>
      <div class="form-item">
        <label class="form-label">Horario</label>
        <input type="text" name="horario" class="form-control" />
      </div>
      <div class="form-item">
        <label class="form-label">Rango de Precio</label>
        <input type="text" name="rangoPrecio" class="form-control" />
      </div>
      <div class="form-item">
        <label class="form-label">URL Imagen</label>
        <input type="text" name="imagen" class="form-control" />
      </div>
      <div class="form-item">
        <label class="form-label">URL Dirección</label>
        <input type="text" name="urlDireccion" class="form-control" />
      </div>
      <button class="btn" type="submit">Agregar Restaurante</button>
    </form>
  </div>
  <div class="crud-table admin-side">
    <h3>Gestión de Restaurantes</h3>
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Nombre</th>
          <th>Tipo</th>
          <th>Horario</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <% if (restaurantes.length === 0) { %>
        <tr>
          <td colspan="5">No hay restaurantes aún.</td>
        </tr>
        <% } %>
        <% restaurantes.forEach(r => { %>
        <tr>
          <td><%= r.id_restaurantes %></td>
          <td><%= r.nombre %></td>
          <td><%= r.tipo_comida %></td>
          <td><%= r.horario %></td>
          <td>
            <div class="btns">
              <a href="/admin/restaurantes/<%= r.id_restaurantes %>/menus" class="btn"><i class="fa-solid fa-list"></i> Menu</a>
              <a href="/admin/restaurantes/<%= r.id_restaurantes %>/editar" class="btn"><i class="fa-solid fa-pen-to-square"></i> Editar</a>
              <form action="/admin/restaurantes/<%= r.id_restaurantes %>/eliminar" method="POST" class="needs-confirm" data-confirm="Eliminar este restaurante?">
                <button type="submit" class="btn btn-danger"><i class="fa-solid fa-x"></i></button>
              </form>
            </div>
          </td>
        </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
</div>

<%- include('../partials/confirm-dialog') %>
<script src="/js/admin.js" defer></script>